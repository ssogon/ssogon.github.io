(self.webpackChunkmatdomabaem_blog=self.webpackChunkmatdomabaem_blog||[]).push([[9664],{77080:function(n,e,t){"use strict";t.r(e),t.d(e,{assets:function(){return c},contentTitle:function(){return u},default:function(){return b},frontMatter:function(){return p},metadata:function(){return s},toc:function(){return d}});var a=t(87462),r=t(63366),l=(t(67294),t(3905)),i=t(93456),o=["components"],p={title:"Step Builder Pattern \uc608\uc81c",tags:["java","design-pattern"]},u=void 0,s={permalink:"/blog/2021/10/31/Step-Builder-Pattern-\uc608\uc81c",source:"@site/blog\\2021-10-31-Step-Builder-Pattern-\uc608\uc81c\\index.md",title:"Step Builder Pattern \uc608\uc81c",description:"JDK 9\uc758 resource references\ubb38\uc744 \ud749\ub0b4\ub0b4\uace0 \uc2f6\uc5b4 \ub2e4\uc74c\uacfc \uac19\uc740 \ud074\ub798\uc2a4\ub97c \uc124\uacc4\ud558\uace0 \uc2f6\ub2e4\uace0 \uac00\uc815\ud574\ubcf4\uc790.",date:"2021-10-31T00:00:00.000Z",formattedDate:"October 31, 2021",tags:[{label:"java",permalink:"/blog/tags/java"},{label:"design-pattern",permalink:"/blog/tags/design-pattern"}],readingTime:3.305,truncated:!0,authors:[],frontMatter:{title:"Step Builder Pattern \uc608\uc81c",tags:["java","design-pattern"]},prevItem:{title:"springdoc-openapi (swagger-ui) \uc801\uc6a9\ud558\uae30",permalink:"/blog/2021/11/06/springdoc-openapi-\uc801\uc6a9\ud558\uae30"},nextItem:{title:"\uc54c\uc544\ub450\uba74 \uc720\uc6a9\ud55c Window Function",permalink:"/blog/2021/10/29/\uc54c\uc544\ub450\uba74-\uc720\uc6a9\ud55c-Window-Function"}},c={authorsImageUrls:[]},d=[],m={toc:d};function b(n){var e=n.components,t=(0,r.Z)(n,o);return(0,l.kt)("wrapper",(0,a.Z)({},m,t,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"JDK 9\uc758 ",(0,l.kt)("a",{parentName:"p",href:"https://www.baeldung.com/java-try-with-resources#java-9---effectively-finalvariables"},"resource references"),"\ubb38\uc744 \ud749\ub0b4\ub0b4\uace0 \uc2f6\uc5b4 \ub2e4\uc74c\uacfc \uac19\uc740 \ud074\ub798\uc2a4\ub97c \uc124\uacc4\ud558\uace0 \uc2f6\ub2e4\uace0 \uac00\uc815\ud574\ubcf4\uc790."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"Closeable resource = ...\nTry.with(resource)\n    .onRun(() -> {\n      ...\n    })\n    .onException(SomeException.class, () -> {\n      ...\n    })\n    .onException(AnotherException.class, () -> {\n      ...\n    })\n    .onFinish(() -> {\n      ...\n    })\n    .run();\n")),(0,l.kt)("p",null,"\uc124\uacc4 \uc694\uac74\ub9cc \uc815\ub9ac\ud574\ubcf4\uc790\uba74 \uc774\ub807\ub2e4."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"with(Closeable)"),"\uc744 \ud638\ucd9c\ud55c \ud6c4\uc5d0\ub294 ",(0,l.kt)("inlineCode",{parentName:"li"},"onRun(Runnable)"),"\ub9cc \ud638\ucd9c\ud560 \uc218 \uc788\ub2e4."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"onRun(Runnable)"),"\uc744 \ud638\ucd9c\ud55c \ud6c4\uc5d0\ub294 ",(0,l.kt)("inlineCode",{parentName:"li"},"onException(Class<Exception>, Runnable)"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"onFinal(Runnable)"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"run()")," \uc911 \ud558\ub098\ub97c \ud638\ucd9c\ud560 \uc218 \uc788\ub2e4."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"onException(Class<Exception>, Runnable)"),"\uc744 \ud638\ucd9c\ud55c \ud6c4\uc5d0\ub294 ",(0,l.kt)("inlineCode",{parentName:"li"},"onException(Class<Exception>, Runnable)"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"onFinal(Runnable)"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"run()")," \uc911 \ud558\ub098\ub97c \ud638\ucd9c\ud560 \uc218 \uc788\ub2e4. (",(0,l.kt)("em",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"em"},"onException(Class<Exception>, Runnable)"),"\uc740 \uc5ec\ub7ec \ubc88 \ud638\ucd9c\ub420 \uc218 \uc788\ub2e4."),")"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"onFinal(Runnable)"),"\uc744 \ud638\ucd9c\ud55c \ud6c4\uc5d0\ub294 ",(0,l.kt)("inlineCode",{parentName:"li"},"run()"),"\ub9cc \ud638\ucd9c\ud560 \uc218 \uc788\ub2e4."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"run()"),"\uc744 \ud638\ucd9c\ud558\uba74 ",(0,l.kt)("inlineCode",{parentName:"li"},"onRun(Runnable)"),"\uc73c\ub85c \uc9c0\uc815\ud55c \ud578\ub4e4\ub7ec\uac00 \uc2e4\ud589\ub41c\ub2e4.",(0,l.kt)("br",{parentName:"li"}),"\uc2e4\ud589 \uc911 \uc608\uc678\uac00 \ubc1c\uc0dd\ud55c\ub2e4\uba74 ",(0,l.kt)("inlineCode",{parentName:"li"},"onException(Class<Exception>, Runnable)"),"\uc73c\ub85c \uc9c0\uc815\ud55c \ud578\ub4e4\ub7ec\uac00 \ud638\ucd9c\ub418\uba70, \ub9c8\uc9c0\ub9c9\uc5d4 ",(0,l.kt)("inlineCode",{parentName:"li"},"onFinal(Runnable)"),"\ub85c \uc9c0\uc815\ud55c \ud578\ub4e4\ub7ec\uac00 \ud638\ucd9c\ub41c\ub2e4.")),(0,l.kt)(i.Mermaid,{config:{},chart:"flowchart LR;\n  with --\x3e onRun;\n  onException --\x3e onException;\n  onException --\x3e onFinal;\n  onException --\x3e run;\n  onRun --\x3e onException;\n  onRun --\x3e onFinal;\n  onRun --\x3e run;\n  onFinal --\x3e run;",mdxType:"Mermaid"}),(0,l.kt)("p",null,"\uc774\ub97c \ub9e4\ub044\ub7fd\uac8c \ud480\uc5b4\ub0b4\ub294\ub370\uc5d0\ub294 ",(0,l.kt)("strong",{parentName:"p"},"\uc2a4\ud15d \ube4c\ub354 \ud328\ud134(",(0,l.kt)("em",{parentName:"strong"},"step builder pattern"),")"),"\uc774 \uc81c\uaca9\uc774\ub2e4.",(0,l.kt)("br",{parentName:"p"}),"\n","step-by-step\uc73c\ub85c \ube4c\ub4dc\ud55c\ub2e4\uace0 \ud574\uc11c \ubd99\uc5ec\uc9c4 \uc774\ub984\uc774\ub2e4."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("a",{parentName:"p",href:"https://www.svlada.com/step-builder-pattern/"},"\ud1a0\ub9c9\uae00: Step builder pattern"))),(0,l.kt)("p",null,"\uc2a4\ud15d \ube4c\ub354 \ud328\ud134\uc740 ",(0,l.kt)("strong",{parentName:"p"},"\uc2a4\ud15d\ubcc4\ub85c \uc778\ud130\ud398\uc774\uc2a4\ub97c \uac01\uae30 \ub2e4\ub974\uac8c \ub178\ucd9c\ud558\ub294 \ubc29\ubc95\uc744 \uc0ac\uc6a9\ud574 \ud544\ub4dc\uc758 \uc138\ud305 \uc21c\uc11c\ub97c \uac15\uc81c\ud55c\ub2e4.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java",metastring:"{3,34,41,49,56}","{3,34,41,49,56}":!0},'@NoArgsConstructor(access = AccessLevel.PRIVATE)\npublic class Try {\n  public static RunHandlerStep with(@Nonnull Closeable resource) {\n    Objects.requireNonNull(resource, "resource must not be null");\n    return new Trier(resource);\n  }\n\n  public interface RunHandlerStep {\n    OptionalHandlerStep onRun(@Nonnull Runnable runHandler);\n  }\n\n  public interface OptionalHandlerStep extends RunStep {\n    OptionalHandlerStep onException(@Nonnull Class<? extends Exception> exceptionClass, @Nonnull Runnable exceptionHandler);\n    RunStep onFinish(@Nonnull Runnable runnable);\n  }\n\n  public interface RunStep {\n    void run();\n  }\n\n  public static class Trier implements RunHandlerStep, OptionalHandlerStep {\n    private final Closeable resource;\n    private final List<ExceptionHandlerPair> exceptionHandlerPairs;\n    private Runnable runHandler;\n    private Runnable finishHandler;\n\n    private Trier(Closeable resource) {\n      this.resource = resource;\n      this.exceptionHandlerPairs = new ArrayList<>();\n    }\n\n    @Override\n    public OptionalHandlerStep onRun(@Nonnull Runnable runHandler) {\n      Objects.requireNonNull(runHandler, "runHandler must not be null");\n      this.runHandler = runHandler;\n      return this;\n    }\n\n    @Override\n    public OptionalHandlerStep onException(@Nonnull Class<? extends Exception> exceptionClass, @Nonnull Runnable exceptionHandler) {\n      Objects.requireNonNull(exceptionClass, "exceptionClass must not be null");\n      Objects.requireNonNull(exceptionHandler, "exceptionHandler must not be null");\n      this.exceptionHandlerPairs.add(new ExceptionHandlerPair(exceptionClass, exceptionHandler));\n      return this;\n    }\n\n    @Override\n    public RunStep onFinish(@Nonnull Runnable finishHandler) {\n      Objects.requireNonNull(finishHandler, "finishHandler must not be null");\n      this.finishHandler = finishHandler;\n      return this;\n    }\n\n    @Override\n    public void run() {\n      ...\n    }\n\n    private record ExceptionHandlerPair(Class<? extends Exception> exceptionClass, Runnable exceptionHandler) {\n    }\n  }\n}\n')),(0,l.kt)("p",null,"\uac01 \uba54\uc11c\ub4dc\uac00 \uc5b4\ub5a4 \uc778\ud130\ud398\uc774\uc2a4\ub97c \ub178\ucd9c\ud558\uace0 \uc788\ub294\uc9c0\uc5d0 \ub300\ud574 \uc8fc\ubaa9\ud574\ubcf4\uba74 \ubcf5\uc7a1\ud560 \uac83\ub3c4 \uc5c6\ub2e4."),(0,l.kt)("hr",null),(0,l.kt)("p",null,"\uc2a4\ud15d \ube4c\ub354 \ud328\ud134\uc744 \uc751\uc6a9\ud574 ",(0,l.kt)("inlineCode",{parentName:"p"},"javax.crypto.Cipher")," \ub798\ud551 \ud074\ub798\uc2a4 \ubc0f \ube4c\ub354\ub97c \uc124\uacc4\ud574\ubcf4\uae30\ub3c4 \ud588\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-kotlin"},'val cryptographer = Cryptographer.aes(key)\n  .cbc(iv)\n  .pkcs5Padding()\n\nval plainText = "plain text"\nval plainBytes = plainText.toByteArray(Charsets.UTF_8)\nval encryptedBytes = cryptographer.encrypt(plainBytes)\nval decryptedBytes = cryptographer.decrypt(encryptedBytes)\nval decryptedText = decryptedBytes.toUtf8()\n\nassertEquals(plainText, decryptedText)\n')),(0,l.kt)("p",null,"\uc804\uccb4 \uc18c\uc2a4 \ucf54\ub4dc\ub294 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/ssogon/cryptographer"},"\uc5ec\uae30"),"\uc5d0\uc11c \ud655\uc778\ud574\ubcfc \uc218 \uc788\ub2e4. (",(0,l.kt)("em",{parentName:"p"},"\ucf54\ud2c0\ub9b0\uc73c\ub85c \uc791\uc131\ub418\uc5b4 \uc788\ub2e4."),")"))}b.isMDXComponent=!0},11748:function(n,e,t){var a={"./locale":89234,"./locale.js":89234};function r(n){var e=l(n);return t(e)}function l(n){if(!t.o(a,n)){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}return a[n]}r.keys=function(){return Object.keys(a)},r.resolve=l,n.exports=r,r.id=11748}}]);