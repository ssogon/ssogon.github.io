<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-구글-구아바-레퍼런스/캐시">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.20">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="ssogon&#39;s devlog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="ssogon&#39;s devlog Atom Feed">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-rh="true">캐시 | ssogon&#x27;s devlog</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/docs/구글-구아바-레퍼런스/캐시"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="캐시 | ssogon&#x27;s devlog"><meta data-rh="true" name="description" content="로컬 캐싱을 구현하는데 사용될 수 있는 guava의 캐시에 대해 설명한다."><meta data-rh="true" property="og:description" content="로컬 캐싱을 구현하는데 사용될 수 있는 guava의 캐시에 대해 설명한다."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/docs/구글-구아바-레퍼런스/캐시"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/구글-구아바-레퍼런스/캐시" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/docs/구글-구아바-레퍼런스/캐시" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.f0eae7e5.css">
<link rel="preload" href="/assets/js/runtime~main.8cffe23e.js" as="script">
<link rel="preload" href="/assets/js/main.bc683e5a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_ObN2"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title text--truncate">ssogon</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/자바-스타일-가이드/들어가며">문서</a><a class="navbar__item navbar__link" href="/blog">블로그</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ssogon" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_dLyj"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_mKqt"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><div class="docPage_ualW"><aside class="theme-doc-sidebar-container docSidebarContainer_UQUJ"><div class="sidebar_RiAD sidebarWithHideableNavbar_d0QC"><a tabindex="-1" class="sidebarLogo_YUvz" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"><b>ssogon</b></a><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/자바-스타일-가이드/들어가며">자바 스타일 가이드</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/자바-8-프로그래밍/들어가며">자바 8 프로그래밍</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/구글-구아바-레퍼런스/들어가며">구글 구아바 레퍼런스</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/구글-구아바-레퍼런스/들어가며">들어가며</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/구글-구아바-레퍼런스/기본-유틸리티">기본 유틸리티</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/구글-구아바-레퍼런스/컬렉션">컬렉션</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/구글-구아바-레퍼런스/그래프">그래프</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/구글-구아바-레퍼런스/캐시">캐시</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/구글-구아바-레퍼런스/병행성">병행성</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/구글-구아바-레퍼런스/문자열">문자열</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/구글-구아바-레퍼런스/네트워킹">네트워킹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/구글-구아바-레퍼런스/프리미티브-타입">프리미티브 타입</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/구글-구아바-레퍼런스/범위">범위</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/구글-구아바-레퍼런스/입출력">입출력</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/구글-구아바-레퍼런스/해싱">해싱</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/구글-구아바-레퍼런스/수학">수학</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/구글-구아바-레퍼런스/리플렉션">리플렉션</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_FykI"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_DTRl"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_uL0j"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_kU5B"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">구글 구아바 레퍼런스</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">캐시</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_bZGK theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_l22C">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>캐시</h1></header><p>로컬 캐싱을 구현하는데 사용될 수 있는 guava의 캐시에 대해 설명한다.</p><hr><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="적용-가능성">적용 가능성<a class="hash-link" href="#적용-가능성" title="Direct link to heading">​</a></h2><p><code>Cache&lt;K, V&gt;</code>는 <code>ConcurrentMap&lt;K, V&gt;</code>와 유사하지만 완전히 같진 않다.</p><ul><li><code>Cache&lt;K, V&gt;</code>는 메모리 공간을 제한하기 위해 요소를 자동으로 제거하도록 구성된다.</li><li><code>ConcurrentMap&lt;K, V&gt;</code>는 요소를 명시적으로 제거하지 않는 한 영속된다.</li></ul><p>일반적으로 guava의 캐싱 유틸리티는 다음과 같은 경우에 적용할 수 있다.</p><ul><li>어플리케이션의 속도를 높이기 위해 메모리를 할애할 수 있는 경우</li><li>특정 키가 두 번 이상 쿼리되리라 예상되는 경우</li><li>캐싱하려는 데이터가 RAM 용량보다 크지 않은 경우</li></ul><blockquote><p><a href="https://github.com/google/guava/wiki/CachesExplained#applicability" target="_blank" rel="noopener noreferrer">Guava: Applicability</a></p></blockquote><hr><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="로드-방식">로드 방식<a class="hash-link" href="#로드-방식" title="Direct link to heading">​</a></h2><p>만약 키로 연관된 값을 불러오거나 계산하는 디폴트 함수가 필요하다면 <code>CacheLoader</code>를 사용해야 한다.<br>
<!-- -->get-if-absent-compute 방식을 원한다면 <code>get()</code> 메서드에 <code>Callable</code>을 넘겨야 한다.<br>
<!-- -->요소들은 <code>put()</code> 메서드를 통해 직접 삽입될 수 있지만, 쉽게 추론되기 위해서 자동으로 로드되는 것을 더 선호해야 한다.</p><blockquote><p><a href="https://github.com/google/guava/wiki/CachesExplained#population" target="_blank" rel="noopener noreferrer">Guava: Population</a></p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="cacheloader">CacheLoader<a class="hash-link" href="#cacheloader" title="Direct link to heading">​</a></h3><p><code>LoadingCache</code>는 <code>CacheLoader</code>를 통해 값들을 읽어들인다.</p><div class="language-java codeBlockContainer_MPoW theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-java codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#ffffff"><span class="token class-name" style="color:#FAC863">LoadingCache</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Graph</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> graphs </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CacheBuilder</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">newBuilder</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">maximumSize</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token number" style="color:#5a9bcf">1000</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">build</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CacheLoader</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Graph</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">          </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Graph</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">load</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">Key</span><span class="token plain"> key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">throws</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">AnyException</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">createExpensiveGraph</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">          </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">.</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> graphs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">ExecutionException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">OtherException</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">getCause</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>get(K)</code> 메서드는 캐시된 값이 있는 경우 그 값을 반환하고, 캐시된 값이 없는 경우 <code>load(K)</code>에서 불러온 값을 반환한다.<br>
<code>CacheLoader.load(K)</code>는 <code>Exception</code>을 발생시킬 수 있기 때문에, <code>get(K)</code> 메서드 사용시 이를 적절히 처리해줘야 한다.</p><p>만약 <code>UncheckedException</code>로 래핑해서 던져주기를 원한다면 <code>get(K)</code> 대신 <code>getUnchecked(K)</code> 메서드를 사용할 수 있다.</p><div class="language-java codeBlockContainer_MPoW theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-java codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#ffffff"><span class="token class-name" style="color:#FAC863">LoadingCache</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Graph</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> graphs </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CacheBuilder</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">newBuilder</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">expireAfterAccess</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token number" style="color:#5a9bcf">10</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">TimeUnit</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">MINUTES</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">build</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CacheBuilder</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Graph</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">          </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Graph</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">load</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">Key</span><span class="token plain"> key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> </span><span class="token comment" style="color:#999999">// no checked Exception</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">createExpensiveGraph</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">          </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">.</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> graphs</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">getUnchecked</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>대량 조회는 <code>getAll(Iterable&lt;K&gt;)</code> 메서드에 키 목록을 넘겨 수행할 수 있다.</p><p><code>getAll(Iterable&lt;K&gt;)</code> 메서드는 캐시에 없는 각 키에 대해 <code>load()</code>를 개별적으로 호출한다.<br>
<!-- -->만약 대량으로 검색하는 것이 개별적으로 조회하는 것보다 효율적이라면 <code>loadAll(Iterable&lt;K&gt;)</code>을 재정의할 것을 고려해봐야 한다.<br>
<!-- -->특별히 요청되지 않은 키라 하더라도 같이 로드하는 식으로 작성할 수도 있다.</p><blockquote><p><a href="https://github.com/google/guava/wiki/CachesExplained#from-a-cacheloader" target="_blank" rel="noopener noreferrer">Guava: From a CacheLoader</a></p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="callable">Callable<a class="hash-link" href="#callable" title="Direct link to heading">​</a></h3><p>모든 <code>Cache</code>는 <code>get(K, Callable&lt;V&gt;)</code> 메서드를 가지고 있다.<br>
<!-- -->이 메서드는 캐시된 값이 있는 경우 그 값을 반환하고, 캐시된 값이 없는 경우 <code>Callable&lt;V&gt;</code>에서 계산된 값을 반환한다.</p><div class="language-java codeBlockContainer_MPoW theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-java codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#ffffff"><span class="token class-name" style="color:#FAC863">Cache</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Value</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> cache </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CacheBuilder</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">newBuilder</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">maximumSize</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token number" style="color:#5a9bcf">1000</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">build</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token comment" style="color:#999999">// look Ma, no CacheLoader</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">.</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token comment" style="color:#999999">// If the key wasn&#x27;t in the &quot;easy to compute&quot; group, we need to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token comment" style="color:#999999">// do things the hard way.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  cache</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">get</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Callable</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Value</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#8dc891">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Value</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">call</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">throws</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">AnyException</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">doThingsTheHardWay</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">ExecutionException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">OtherException</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">getCause</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>Callable&lt;V&gt;</code>에서 계산된 값은 그대로 캐시에 적재되어 사용된다.</p><blockquote><p><a href="https://github.com/google/guava/wiki/CachesExplained#from-a-callable" target="_blank" rel="noopener noreferrer">Guava: From a Callable</a></p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="직접-삽입">직접 삽입<a class="hash-link" href="#직접-삽입" title="Direct link to heading">​</a></h3><p><code>Cache</code>의 값은 <code>put(K, V)</code>, <code>get(K, Callable&lt;V&gt;)</code> 메서드를 통해 직접 삽입될 수도 있다.<br>
<code>asMap()</code> 메서드를 통해 노출된 <code>ConcurrentMap&lt;K, V&gt;</code>을 조작하여 캐시를 변경할 수도 있지만 권장되는 방법은 아니다.</p><blockquote><p><a href="https://github.com/google/guava/wiki/CachesExplained#inserted-directly" target="_blank" rel="noopener noreferrer">Guava: Inserted Directly</a></p></blockquote><hr><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="퇴거-정책">퇴거 정책<a class="hash-link" href="#퇴거-정책" title="Direct link to heading">​</a></h2><p>모든 항목을 캐시할만한 충분한 메모리가 없는 경우 퇴거 정책을 설정할 수 있다.<br>
<!-- -->퇴거 대상은 비교적 자주 사용하지 않은 항목이 우선적으로 선택될 것이다.</p><blockquote><p><a href="https://github.com/google/guava/wiki/CachesExplained#eviction" target="_blank" rel="noopener noreferrer">Guava: Eviction</a></p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="크기-기반-퇴거">크기 기반 퇴거<a class="hash-link" href="#크기-기반-퇴거" title="Direct link to heading">​</a></h3><p>크기 기반 퇴거란 캐시에 적재된 항목의 개수가 특정 크기를 넘지 않도록 하는 정책이다.<br>
<code>CacheBuilder</code>의 <code>maximumSize(long)</code> 메서드를 사용하여 최대 크기를 지정한다.</p><div class="language-java codeBlockContainer_MPoW theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-java codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#ffffff"><span class="token class-name" style="color:#FAC863">LoadingCache</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Graph</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> graphs </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CacheBuilder</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">newBuilder</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">maximumSize</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token number" style="color:#5a9bcf">10000</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">build</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CacheLoader</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Graph</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">          </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Graph</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">load</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">Key</span><span class="token plain"> key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">throws</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">AnyException</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">createExpensiveGraph</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">          </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><a href="https://github.com/google/guava/wiki/CachesExplained#size-based-eviction" target="_blank" rel="noopener noreferrer">Guava: Size-based Eviction</a></p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="가중치-기반-퇴거">가중치 기반 퇴거<a class="hash-link" href="#가중치-기반-퇴거" title="Direct link to heading">​</a></h3><p>각 항목이 차지하는 메모리 공간이 다를 경우 가중치 기반 퇴거를 고려해볼 수 있다.<br>
<code>CacheBuilder</code>의 <code>maximumWeight(long)</code> 메서드로 최대 가중치를 지정하고, <code>weigher(Weigher)</code> 메서드로 각 값의 가중치를 어떤 식으로 계산할 것인지를 작성한다.</p><div class="language-java codeBlockContainer_MPoW theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-java codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#ffffff"><span class="token class-name" style="color:#FAC863">LoadingCache</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Graph</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> graphs </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CacheBuilder</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">newBuilder</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">maximumWeight</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token number" style="color:#5a9bcf">100000</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">weigher</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Weigher</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Graph</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">int</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">weigh</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">Key</span><span class="token plain"> k</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Graph</span><span class="token plain"> g</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> g</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">vertices</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">size</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">build</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CacheLoader</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Graph</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">          </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Graph</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">load</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">Key</span><span class="token plain"> key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> </span><span class="token comment" style="color:#999999">// no checked exception</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">createExpensiveGraph</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">          </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><a href="https://github.com/google/guava/wiki/CachesExplained#size-based-eviction" target="_blank" rel="noopener noreferrer">Guava: Size-based Eviction</a></p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="시간-기반-퇴거">시간 기반 퇴거<a class="hash-link" href="#시간-기반-퇴거" title="Direct link to heading">​</a></h3><p>오랫동안 접근되지 않은 항목을 제거하고자 한다면 시간 기반 퇴거를 사용해야 한다.<br>
<code>CacheBuilder</code>의 <code>expireAfterAceess(long, TimeUnit)</code> 메서드는 마지막으로 읽고 쓴 시간을 확인하고, <code>expireAfterWrite(long, TimeUnit)</code> 메서드는 생성된 시간만을 확인한다.</p><div class="language-java codeBlockContainer_MPoW theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-java codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#ffffff"><span class="token class-name" style="color:#FAC863">LoadingCache</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Graph</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> graphs </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CacheBuilder</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">newBuilder</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">expireAfterWrite</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">Duration</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">ofMinutes</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token number" style="color:#5a9bcf">10</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">build</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CacheLoader</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Graph</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">          </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Graph</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">load</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">Key</span><span class="token plain"> key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">throws</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">AnyException</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">createExpensiveGraph</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">          </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><a href="https://github.com/google/guava/wiki/CachesExplained#timed-eviction" target="_blank" rel="noopener noreferrer">Guava: Timed Eviction</a></p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="참조-기반-퇴거">참조 기반 퇴거<a class="hash-link" href="#참조-기반-퇴거" title="Direct link to heading">​</a></h3><p>참조 기반 퇴거란 키나 값에 <code>WeakReference</code> 및 <code>SoftReference</code>를 사용하여 가비지 컬렉터에게 자동으로 수집되도록 하는 정책이다.<br>
<code>CacherBuilder</code>의 <code>weakKeys()</code>, <code>weakValues()</code>, <code>softValues()</code> 메서드를 이용한다.</p><blockquote><p><a href="https://github.com/google/guava/wiki/CachesExplained#reference-based-eviction" target="_blank" rel="noopener noreferrer">Guava: Reference-based Eviction</a><br>
<a href="https://d2.naver.com/helloworld/329631" target="_blank" rel="noopener noreferrer">Naver D2: Java Reference와 GC</a></p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="직접-제거">직접 제거<a class="hash-link" href="#직접-제거" title="Direct link to heading">​</a></h3><p><code>Cache</code>에 캐시된 항목들을 직접 제거하는 방법도 제공하고 있다.</p><ul><li>개별적으로 제거하려면 <code>invalidate(K)</code> 메서드를 사용한다.</li><li>대량으로 제거하려면 <code>invalidateAll(Iterable&lt;K&gt;)</code> 메서드를 사용한다.</li><li>모든 항목을 제거하려면 <code>invalidateAll()</code> 메서드를 사용한다.</li></ul><blockquote><p><a href="https://github.com/google/guava/wiki/CachesExplained#explict-removals" target="_blank" rel="noopener noreferrer">Guava: Explicit Removals</a></p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="제거-리스너">제거 리스너<a class="hash-link" href="#제거-리스너" title="Direct link to heading">​</a></h3><p>항목이 제거됐을 때 특정 작업을 수행하기 위해 <code>RemovalListener&lt;K, V&gt;</code>를 지정할 수 있다.<br>
<!-- -->리스너가 전달받게 되는 <code>RemovalNotification&lt;K, V&gt;</code>은 제거된 키와 값, <code>RemovalCause</code>를 가지고 있다.<br>
<!-- -->만약 도중 예외가 발생한다면 <code>Logger</code>에 의해 로깅되고 그대로 삼켜지게 된다.</p><div class="language-java codeBlockContainer_MPoW theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-java codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#ffffff"><span class="token class-name" style="color:#FAC863">CacheLoader</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">DatabaseConnection</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> loader </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CacheLoader</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">DatabaseConnection</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">DatabaseConnection</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">load</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">Key</span><span class="token plain"> key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">throws</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">openConnection</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token class-name" style="color:#FAC863">RemovalListener</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">DatabaseConnection</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> removalListener </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">RemovalListener</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">DatabaseConnection</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">void</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">onRemoval</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">RemovalNotification</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">DatabaseConnection</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> removal</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token class-name" style="color:#FAC863">DatabaseConnection</span><span class="token plain"> conn </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> removal</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">getValue</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    conn</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">close</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"> </span><span class="token comment" style="color:#999999">// tear down properly</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CacheBuilder</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">newBuilder</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">expireAfterWrite</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token number" style="color:#5a9bcf">2</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">TimeUnit</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">MINUTES</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">RemovalListener</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">removalListener</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">build</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">loader</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>RemovalListener&lt;K, V&gt;</code>는 기본적으로 동기식으로 실행되기 때문에 비싼 연산은 속도 저하를 일으킬 수 있다.<br>
<code>RemovalListeners.asynchronous(RemovalListener&lt;K, V&gt;, Executor)</code> 메서드로 <code>RemovalListener&lt;K, V&gt;</code>를 데코레이팅하면 비동기적으로 동작하게 만들 수도 있다.</p><blockquote><p><a href="https://github.com/google/guava/wiki/CachesExplained#removal-listeners" target="_blank" rel="noopener noreferrer">Guava: Removal Listeners</a></p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="정리">정리<a class="hash-link" href="#정리" title="Direct link to heading">​</a></h3><p>정리(<em>cleanup</em>)란 일정 주기마다 캐시된 모든 항목을 퇴거시키는 작업을 말한다.<br>
<code>CacheBuilder</code>로 빌드된 <code>Cache</code>는 이러한 작업을 별도로 수행하지는 않는다.</p><p>정리 작업을 위해서는 스레드를 만들어야하고, shared lock으로 인해 경쟁 상태를 유발하기 때문이다.<br>
<!-- -->또한 스레드 생성이 제한적인 환경에서는 이를 사용할 수 조차 없을 것이다.</p><p>정기적인 정리 작업을 원하는 경우 <code>Cache.cleanUp()</code>을 호출하는 자체 유지관리 스레드를 만들어야 한다.</p><blockquote><p><a href="https://github.com/google/guava/wiki/CachesExplained#when-does-cleanup-happen" target="_blank" rel="noopener noreferrer">Guava: When Does Cleanup Happen?</a></p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="새로고침">새로고침<a class="hash-link" href="#새로고침" title="Direct link to heading">​</a></h3><p><code>LoadingCache</code>의 <code>refresh(K)</code> 메서드는 지정한 키의 값을 비동기적으로 다시 로드한다.<br>
<!-- -->값이 새로 로드될 때까지 조회 작업을 대기시키는 퇴거와는 달리, 새로고침 중에는 이전에 캐시되어있던 값을 반환해준다.<br>
<!-- -->만약 새로고침 중에 예외가 발생한다면 이전 값을 유지한 채로 예외를 기록한 후 삼켜버린다.</p><p><code>CacheLoader.reload(K, V)</code>를 오버라이딩하면 새로고침 중 수행할 작업을 지정할 수도 있다.</p><div class="language-java codeBlockContainer_MPoW theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-java codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#ffffff"><span class="token comment" style="color:#999999">// Some keys don&#x27;t need refreshing, and we want refreshes to be done asynchronously.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token class-name" style="color:#FAC863">LoadingCache</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Graph</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> graphs </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CacheBuilder</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">newBuilder</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">maximumSize</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token number" style="color:#5a9bcf">1000</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">refreshAfterWrite</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">TimeUnit</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token plain">MINUTES</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">build</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">CacheLoader</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Key</span><span class="token generics punctuation" style="color:#8dc891">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#FAC863">Graph</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">          </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Graph</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">load</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token class-name" style="color:#FAC863">Key</span><span class="token plain"> key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"> </span><span class="token comment" style="color:#999999">// no checked exception</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getGraphFromDatabase</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">          </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">          </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">ListenableFuture</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Graph</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">reload</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">final</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Key</span><span class="token plain"> key</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Graph</span><span class="token plain"> prevGraph</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">(</span><span class="token function" style="color:#79b6f2">neverNeedsRefresh</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">              </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Futures</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">immediateFuture</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">prevGraph</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">              </span><span class="token comment" style="color:#999999">// asynchronous!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">              </span><span class="token class-name" style="color:#FAC863">ListenableFutureTask</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Graph</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token plain"> task </span><span class="token operator" style="color:#d7deea">=</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">ListenableFutureTask</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">create</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Callable</span><span class="token generics punctuation" style="color:#8dc891">&lt;</span><span class="token generics class-name" style="color:#FAC863">Graph</span><span class="token generics punctuation" style="color:#8dc891">&gt;</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                </span><span class="token keyword" style="color:#c5a5c5">public</span><span class="token plain"> </span><span class="token class-name" style="color:#FAC863">Graph</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">call</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                  </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">getGraphFromDatabase</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">                </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">              </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">              executor</span><span class="token punctuation" style="color:#8dc891">.</span><span class="token function" style="color:#79b6f2">execute</span><span class="token punctuation" style="color:#8dc891">(</span><span class="token plain">task</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">              </span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> task</span><span class="token punctuation" style="color:#8dc891">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">          </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">)</span><span class="token punctuation" style="color:#8dc891">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>CacheBuilder.refreshAfterWrite(long, TimeUnit)</code>을 사용하면 주기적으로 새로고침을 할 수 있다.<br>
<!-- -->시간 기반 퇴거인 <code>CacheBuilder.expireAfterWrite(long, TimeUnit)</code>와는 달리 새로고칠 수 있는 항목이 실제로 조회될 때가 되어서야 게으른(<em>lazy</em>) 새로고침을 수행한다.</p><p>같은 캐시에 <code>refreshAfterWrite</code>와 <code>expireAfterWrite</code>를 모두 지정할 수도 있다.<br>
<!-- -->새로고침 대상이 되더라도 만료 타이머를 갱신하지는 않으므로 일정 시간동안 조회가 되지 않는다면 퇴거될 것이다.</p><blockquote><p><a href="https://github.com/google/guava/wiki/CachesExplained#refresh" target="_blank" rel="noopener noreferrer">Guava: Refresh</a></p></blockquote><hr><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="부가-기능">부가 기능<a class="hash-link" href="#부가-기능" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="통계">통계<a class="hash-link" href="#통계" title="Direct link to heading">​</a></h3><p><code>CacheBuilder</code>의 <code>recordStats()</code> 메서드를 사용하면 통계 기능을 지원하는 캐시를 빌드할 수 있다.<br>
<!-- -->통계 정보는 <code>stats()</code> 메서드의 반환 값인 <code>CacheStats</code>에 담겨 있다.</p><p>다음은 <code>CacheStats</code>가 제공하는 메서드의 일부다.</p><ul><li><code>hitRate()</code> 메서드는 캐시 히트율을 반환한다.</li><li><code>averageLoadPenalty()</code> 메서드는 새로운 항목을 로드하는데 걸린 평균 시간을 반환한다.</li><li><code>evictionCount()</code> 메서드는 항목이 퇴거된 횟수를 반환한다.</li></ul><blockquote><p><a href="https://github.com/google/guava/wiki/CachesExplained#statistics" target="_blank" rel="noopener noreferrer">Guava: Statistics</a></p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="뷰">뷰<a class="hash-link" href="#뷰" title="Direct link to heading">​</a></h3><p>모든 <code>Cache&lt;K, V&gt;</code>는 <code>asMap()</code> 메서드를 이용해 <code>ConcurrentMap&lt;K, V&gt;</code> 뷰를 반환받을 수 있다.<br>
<!-- -->이렇게 만들어진 뷰가 <code>Cache&lt;K, V&gt;</code>와 어떻게 상호작용하는지는 약간의 설명이 필요하다.</p><ul><li><code>cache.asMap()</code>은 현재 로드된 모든 항목을 가지고 있다.<br><code>cache.asMap().keySet()</code>은 현재 로드된 모든 키를 가지고 있다.</li><li><code>asMap().get(K)</code>은 본질적으로 <code>cache.getIfPresent(K)</code>와 동일하다.</li><li>캐시를 읽거나 쓰는 작업은 접근 시간을 초기화한다.<br>이는 <code>cache.asMap().get(K)</code>, <code>cache.asMap().put(K, V)</code>도 마찬가지다.<br>그러나 <code>cache.asMap().containsKey(K)</code>나 <code>cache.asMap().entrySet()</code>처럼 <code>Collection</code>의 뷰를 조회하는 것은 접근 시간을 초기화하지 않는다.</li></ul><blockquote><p><a href="https://github.com/google/guava/wiki/CachesExplained#asmap" target="_blank" rel="noopener noreferrer">Guava: asMap</a></p></blockquote><hr><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="중단">중단<a class="hash-link" href="#중단" title="Direct link to heading">​</a></h2><p>기본적으로 <code>CacheLoader</code>는 중단을 지원하지 않는다.</p><blockquote><p><a href="https://github.com/google/guava/wiki/CachesExplained#interruption" target="_blank" rel="noopener noreferrer">Guava: Interruption</a></p></blockquote><hr><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="caffeine과의-비교">caffeine과의 비교<a class="hash-link" href="#caffeine과의-비교" title="Direct link to heading">​</a></h2><p>guava cache를 사용하던 스프링 프레임워크는 4.3 버전에서 캐싱 라이브러리인 <a href="https://github.com/ben-manes/caffeine" target="_blank" rel="noopener noreferrer">caffeine</a>을 추가로 도입했고, 5.0 버전에서는 caffeine이 guava cache를 완전히 대체해버렸다.<br>
<!-- -->스프링이 guava cache를 버리고 caffeine을 택한 이유는 caffeine이 보다 독립적이고 적극적으로 관리되기 때문이라고 한다.</p><blockquote><p><a href="https://github.com/spring-projects/spring-framework/issues/18370" target="_blank" rel="noopener noreferrer">Github: Drop Guava caching - superseded by Caffeine [SPR-13797]</a></p></blockquote><p>caffeine을 만든 Ben Manes의 이야기를 들어보면 처음에는 guava cache를 마이그레이션하려 했으나 팀원간 마찰이 있었던 것 같다.</p><blockquote><p><a href="https://stackoverflow.com/a/55501343" target="_blank" rel="noopener noreferrer">Stack Overflow: Caffeine versus Guava cache</a></p></blockquote></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/구글-구아바-레퍼런스/그래프"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">그래프</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/구글-구아바-레퍼런스/병행성"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">병행성</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#적용-가능성" class="table-of-contents__link toc-highlight">적용 가능성</a></li><li><a href="#로드-방식" class="table-of-contents__link toc-highlight">로드 방식</a><ul><li><a href="#cacheloader" class="table-of-contents__link toc-highlight">CacheLoader</a></li><li><a href="#callable" class="table-of-contents__link toc-highlight">Callable</a></li><li><a href="#직접-삽입" class="table-of-contents__link toc-highlight">직접 삽입</a></li></ul></li><li><a href="#퇴거-정책" class="table-of-contents__link toc-highlight">퇴거 정책</a><ul><li><a href="#크기-기반-퇴거" class="table-of-contents__link toc-highlight">크기 기반 퇴거</a></li><li><a href="#가중치-기반-퇴거" class="table-of-contents__link toc-highlight">가중치 기반 퇴거</a></li><li><a href="#시간-기반-퇴거" class="table-of-contents__link toc-highlight">시간 기반 퇴거</a></li><li><a href="#참조-기반-퇴거" class="table-of-contents__link toc-highlight">참조 기반 퇴거</a></li><li><a href="#직접-제거" class="table-of-contents__link toc-highlight">직접 제거</a></li><li><a href="#제거-리스너" class="table-of-contents__link toc-highlight">제거 리스너</a></li><li><a href="#정리" class="table-of-contents__link toc-highlight">정리</a></li><li><a href="#새로고침" class="table-of-contents__link toc-highlight">새로고침</a></li></ul></li><li><a href="#부가-기능" class="table-of-contents__link toc-highlight">부가 기능</a><ul><li><a href="#통계" class="table-of-contents__link toc-highlight">통계</a></li><li><a href="#뷰" class="table-of-contents__link toc-highlight">뷰</a></li></ul></li><li><a href="#중단" class="table-of-contents__link toc-highlight">중단</a></li><li><a href="#caffeine과의-비교" class="table-of-contents__link toc-highlight">caffeine과의 비교</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright 2022 ssogon. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.8cffe23e.js"></script>
<script src="/assets/js/main.bc683e5a.js"></script>
</body>
</html>